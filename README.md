# üõçÔ∏è –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π Telegram –ú–∞–≥–∞–∑–∏–Ω

**–ú–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π Telegram –±–æ—Ç –¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞ —Å —Å–∏—Å—Ç–µ–º–æ–π T-Points –∏ HR —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º**

![Python](https://img.shields.io/badge/Python-3.12-blue)
![aiogram](https://img.shields.io/badge/aiogram-3.20.0-green)
![SQLAlchemy](https://img.shields.io/badge/SQLAlchemy-2.0.41-orange)
![License](https://img.shields.io/badge/License-Private-red)

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π Telegram –±–æ—Ç –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞ –∫–æ–º–ø–∞–Ω–∏–∏ —Å —Å–∏—Å—Ç–µ–º–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –≤–∞–ª—é—Ç—ã T-Points, –∫–∞—Ç–∞–ª–æ–≥–æ–º —Ç–æ–≤–∞—Ä–æ–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∑–∞–∫–∞–∑–∞–º–∏ –∏ HR —Ñ—É–Ω–∫—Ü–∏—è–º–∏.

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **üë• –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: –û–Ω–±–æ—Ä–¥–∏–Ω–≥, –ø—Ä–æ—Ñ–∏–ª–∏, —Ä–æ–ª–∏ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/HR/–∞–¥–º–∏–Ω)
- **üõí –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤**: –ö–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ç–æ–≤–∞—Ä—ã —Å —Ä–∞–∑–º–µ—Ä–∞–º–∏, —Ü–≤–µ—Ç–∞–º–∏, –æ—Å—Ç–∞—Ç–∫–∞–º–∏
- **üõçÔ∏è –ö–æ—Ä–∑–∏–Ω–∞ –∏ –∑–∞–∫–∞–∑—ã**: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É, –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤
- **üíé T-Points —Å–∏—Å—Ç–µ–º–∞**: –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –≤–∞–ª—é—Ç–∞, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- **üì¶ HR —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å
- **üéÇ –ê–≤—Ç–æ—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –î–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è, —é–±–∏–ª–µ–∏, –æ—Å—Ç–∞—Ç–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤
- **‚ùì Q&A —Å–∏—Å—Ç–µ–º–∞**: –ê–Ω–æ–Ω–∏–º–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã
- **üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –û—Ç—á–µ—Ç—ã –ø–æ –∑–∞–∫–∞–∑–∞–º, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, T-Points

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º **Clean Architecture**:

```
üéØ Handlers (UI —Å–ª–æ–π)
    ‚Üì –∏—Å–ø–æ–ª—å–∑—É—é—Ç
üîß Services (–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
    ‚Üì –∏—Å–ø–æ–ª—å–∑—É—é—Ç  
üíæ Repositories (–°–ª–æ–π –¥–∞–Ω–Ω—ã—Ö)
    ‚Üì —Ä–∞–±–æ—Ç–∞—é—Ç —Å
üóÉÔ∏è Models (SQLAlchemy –º–æ–¥–µ–ª–∏)
```

### üîß Middleware

- **DatabaseMiddleware**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ –ë–î, DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –æ—á–µ—Ä–µ–¥—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **GroupMembershipMiddleware**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–ª–µ–Ω—Å—Ç–≤–∞ –≤ –≥—Ä—É–ø–ø–µ
- **HROrAdminAccess**: –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è HR/Admin —Ñ—É–Ω–∫—Ü–∏–π

### üì¶ –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **aiogram3-di**: Dependency Injection
- **SQLAlchemy 2.0**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ë–î
- **aiosqlite**: SQLite –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏/—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **APScheduler**: –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.12+
- SQLite (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏) –∏–ª–∏ PostgreSQL (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
git clone <repository-url>
cd PRODACTION
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate     # Windows
pip install -r requirements.txt
```

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:

```env
BOT_TOKEN=your_telegram_bot_token
GROUP_ID=your_telegram_group_id
DATABASE_URL=sqlite+aiosqlite:///data/shop.db
DEBUG=false
```

### 3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î
python -c "
import asyncio
from app.database import create_tables
asyncio.run(create_tables())
"

# –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π
python migrations/create_auto_events_system.py
python migrations/create_tpoints_activities.py
```

### 4. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
python main.py
```

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
PRODACTION/
‚îú‚îÄ‚îÄ app/                        # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ catalog/               # –ú–æ–¥—É–ª—å –∫–∞—Ç–∞–ª–æ–≥–∞ —Ç–æ–≤–∞—Ä–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handlers/         # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–∞—Ç–∞–ª–æ–≥–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ keyboards/        # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∫–∞—Ç–∞–ª–æ–≥–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/           # –£—Ç–∏–ª–∏—Ç—ã –∫–∞—Ç–∞–ª–æ–≥–∞
‚îÇ   ‚îú‚îÄ‚îÄ orders/               # –ú–æ–¥—É–ª—å –∑–∞–∫–∞–∑–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ keyboards/       # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∑–∞–∫–∞–∑–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analytics.py     # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∑–∞–∫–∞–∑–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ management.py    # HR —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user_orders.py   # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∑–∞–∫–∞–∑—ã
‚îÇ   ‚îú‚îÄ‚îÄ handlers/            # –û—Å–Ω–æ–≤–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main_menu.py     # –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ simple_admin.py  # –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ questions.py     # Q&A —Å–∏—Å—Ç–µ–º–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user_management.py # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ services/            # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ notifications/   # –°–µ—Ä–≤–∏—Å—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.py         # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ order.py        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cart.py         # –ö–æ—Ä–∑–∏–Ω–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auto_events_service.py # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ repositories/        # –°–ª–æ–π –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user_repository.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ order_repository.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ catalog_repository.py
‚îÇ   ‚îú‚îÄ‚îÄ middlewares/         # –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –ü–û
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.py     # –ë–î –∏ DI
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ access_control.py # –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ group_membership.py # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä—É–ø–ø—ã
‚îÇ   ‚îú‚îÄ‚îÄ models/             # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ models.py       # –í—Å–µ –º–æ–¥–µ–ª–∏ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ keyboards/          # –û–±—â–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ utils/              # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ config.py           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ scheduler.py        # –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Å–æ–±—ã—Ç–∏–π
‚îú‚îÄ‚îÄ data/                   # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ logs/                   # –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ migrations/             # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îú‚îÄ‚îÄ tests/                  # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ main.py                # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îî‚îÄ‚îÄ requirements.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

## üë• –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### üôã‚Äç‚ôÇÔ∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (user)
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–∞–ª–æ–≥–∞ —Ç–æ–≤–∞—Ä–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É –∏ –∑–∞–∫–∞–∑—ã
- –ü—Ä–æ—Å–º–æ—Ç—Ä –±–∞–ª–∞–Ω—Å–∞ T-Points –∏ –∏—Å—Ç–æ—Ä–∏–∏
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∞–Ω–æ–Ω–∏–º–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
- –û—Ç–º–µ–Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤

### üë©‚Äçüíº HR (hr)
- –í—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏ (–ø—Ä–∏–Ω—è—Ç–∏–µ, —Å—Ç–∞—Ç—É—Å—ã, –≤—ã–¥–∞—á–∞)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (–∏–º–ø–æ—Ä—Ç, —ç–∫—Å–ø–æ—Ä—Ç, T-Points)
- –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–æ–º —Ç–æ–≤–∞—Ä–æ–≤

### üë®‚Äçüíª –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (admin)
- –í—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ HR
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –î–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–µ

## üíé T-Points —Å–∏—Å—Ç–µ–º–∞

### –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ T-Points
- **–î–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è**: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è —Å—É–º–º–∞
- **–Æ–±–∏–ª–µ–∏ —Ä–∞–±–æ—Ç—ã**: –ë–∞–∑–æ–≤–∞—è —Å—É–º–º–∞ + –º–Ω–æ–∂–∏—Ç–µ–ª—å –∑–∞ –≥–æ–¥—ã
- **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏**: –ß–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É TPointsActivity
- **–†—É—á–Ω–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ**: HR/–ê–¥–º–∏–Ω

### –°–ø–∏—Å–∞–Ω–∏–µ T-Points
- **–ü–æ–∫—É–ø–∫–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞
- **–í–æ–∑–≤—Ä–∞—Ç—ã**: –ü—Ä–∏ –æ—Ç–º–µ–Ω–µ –∑–∞–∫–∞–∑–æ–≤
- **–†—É—á–Ω–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ**: HR/–ê–¥–º–∏–Ω

## üéÇ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏
- **–î–Ω–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**: –∑–∞ —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –ø—Ä–∏—Å—ã–ª–∞—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- **–í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏**: –∫–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **T-Points**: —Å–∫–æ–ª—å–∫–æ –Ω–∞—á–∏—Å–ª—è—Ç—å
- **–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**: –∫–∞–∂–¥—ã–π HR –º–æ–∂–µ—Ç –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å —Ç–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π
1. **–î–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è** üéÇ
2. **–Æ–±–∏–ª–µ–∏ —Ä–∞–±–æ—Ç—ã** üèÜ  
3. **–û—Å—Ç–∞—Ç–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤** üì¶

## üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ ‚ö†Ô∏è **–ù–ï –†–ê–ë–û–¢–ê–ï–¢**

> **–í–ù–ò–ú–ê–ù–ò–ï**: –ú–æ–¥—É–ª—å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (`app/orders/analytics.py`) —Å–æ–¥–µ—Ä–∂–∏—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏. –ë—É–¥–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö.

### –ü—Ä–æ–±–ª–µ–º—ã –º–æ–¥—É–ª—è:
- ‚ùå –û—à–∏–±–∫–∏ –≤ –º–µ—Ç–æ–¥–∞—Ö `get_analytics_by_departments()`, `get_top_products()`, `get_top_ambassadors()`
- ‚ùå –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚ùå –ù–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

### –ü–ª–∞–Ω–∏—Ä—É–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è):
- **–ó–∞–∫–∞–∑—ã**: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º, —Å—Ç–∞—Ç—É—Å–∞–º, –æ—Ç–¥–µ–ª–∞–º
- **–¢–æ–≤–∞—Ä—ã**: –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã, –æ—Å—Ç–∞—Ç–∫–∏
- **T-Points**: –æ–±–æ—Ä–æ—Ç—ã, —Ç–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

### –†–∞–±–æ—Ç–∞—é—â–∏–π —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤ Excel
- ‚úÖ T-Points —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ Excel  
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ Excel

## üîß API –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
- `/start` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- `/admin` - –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤)

### Callback –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–∞—Ç–∞–ª–æ–≥—É
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω–æ–π
- –°—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤
- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
- Q&A —Å–∏—Å—Ç–µ–º–∞

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞
- Middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–µ–π
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≥—Ä—É–ø–ø–µ Telegram
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### –î–∞–Ω–Ω—ã–µ
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ó–∞—â–∏—Ç–∞ –æ—Ç SQL –∏–Ω—ä–µ–∫—Ü–∏–π —á–µ—Ä–µ–∑ SQLAlchemy

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ PostgreSQL
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –û—á–µ—Ä–µ–¥—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ù–∞–≥—Ä—É–∑–∫–∞
- –†–∞—Å—Å—á–∏—Ç–∞–Ω–æ –Ω–∞ ~100 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- Connection pooling –¥–ª—è –ë–î
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏–∏

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
```bash
# –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π
python migrations/create_auto_events_system.py



## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–æ–≤
- **INFO**: –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- **WARNING**: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- **ERROR**: –û—à–∏–±–∫–∏
- **DEBUG**: –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –§–∞–π–ª—ã –ª–æ–≥–æ–≤
- `logs/bot.log` - –í—Å–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
pytest tests/

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
python create_test_user.py
```

## ü§ù –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

1. **–°–æ–∑–¥–∞–π—Ç–µ –º–æ–¥–µ–ª—å** –≤ `app/models/models.py`
2. **–°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π** –≤ `app/repositories/`
3. **–°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å** –≤ `app/services/`
4. **–°–æ–∑–¥–∞–π—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏** –≤ `app/handlers/`
5. **–î–æ–±–∞–≤—å—Ç–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã** –≤ `app/keyboards/`
6. **–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ —Ä–æ—É—Ç–µ—Ä** –≤ `main.py`

### –°—Ç–∏–ª—å –∫–æ–¥–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ type hints
- –°–ª–µ–¥—É–π—Ç–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º Clean Architecture
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã
- –ü–æ–∫—Ä—ã–≤–∞–π—Ç–µ —Ç–µ—Å—Ç–∞–º–∏ –Ω–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ `logs/bot.log`
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `.env`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –ë–î –∏ –º–∏–≥—Ä–∞—Ü–∏–π
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ aiogram

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏.

---

**–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã** 